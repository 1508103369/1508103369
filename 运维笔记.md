简述
自建机房：不易扩展，前期投入成本大（机房环境，硬件设备，运维人员）

云服务：资源弹性拓展收缩 

IaaS：基础设施即服务 提供按需付费的云计算，存储，数据中心，网络等，例如阿里云，AWS，AZURE等等

PaaS：提供硬件和软件工具，使开发人员更轻松地快读创建web或移动应用

SaaS软件即服务：基于云的应用，被授予企业或个人通过网络访问使用。如百度云盘，钉钉

<img src="https://github.com/1508103369/image/blob/typora/image-20231206104512475.png?raw=true" style="zoom:33%;" />

[C:\~]$ ssh root@192.168.177.10 -p 2002   登录，【root】那里是用户名  -p后面是端口号

```shell
[root@chen ~]# w //查询当前账户
 15:39:54 up 28 min,  1 user,  load average: 0.00, 0.01, 0.04
USER     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT
root     pts/1    192.168.177.1    15:11    2.00s  0.03s  0.01s w
[root@chen ~]# who
root     pts/1        2023-12-06 15:11 (192.168.177.1)

```

Git使用

```bash
先在项目目录打开git-bash
git add .    //把当前目录下所有文件加到暂存区
git commit -m "test"     //声明（必填”内容随意“）
git push   //推送到github服务器
```

<img src="https://raw.githubusercontent.com/1508103369/image/typora/image-20231207140613784.png" alt="image-20231207140613784" style="zoom: 50%;" />

下面的url从github获取

```bash
 git clone https://github.com/1508103369/1508103369.git   //下载1508103369仓库到本地
Cloning into '1508103369'...
remote: Enumerating objects: 33, done.
remote: Counting objects: 100% (33/33), done.
remote: Compressing objects: 100% (23/23), done.
remote: Total 33 (delta 9), reused 21 (delta 5), pack-reused 0
Receiving objects: 100% (33/33), 9.45 MiB | 3.66 MiB/s, done.
Resolving deltas: 100% (9/9), done.    //下载完成后在文件夹中默认显示main分支的内容

15081@hello MINGW64 ~/Desktop/test/1508103369 (main)
$ ls
README.md

15081@hello MINGW64 ~/Desktop/test/1508103369 (main)
$ git branch -a   //查看所有分支情况
* main
  remotes/origin/HEAD -> origin/main
  remotes/origin/main
  remotes/origin/master

15081@hello MINGW64 ~/Desktop/test/1508103369 (main)
$ git checkout master        //切换到master分支
Switched to a new branch 'master'
branch 'master' set up to track 'origin/master'.

15081@hello MINGW64 ~/Desktop/test/1508103369 (master)
$ ls    //这样才会在文件夹中显示别的分支文件
C++学习笔记.md                   K8s学习笔记.md    小程序开发.md  数据结构.md
K8S教程深入浅出_unprotected.pdf  c语言学习笔记.md  操作系统.docx  运维笔记.md
```



# 运维笔记



## 离线安装

使用scp方式讲本地的包推送到目标服务器

```bash
scp nginx*.rpm user@目标ip:目标绝对路径
如scp nginx_1.18.0-6ubuntu14.4_amd64.deb root@192.168.177.20:/home
```









## top监视系统性能

1. **在 `top` 中执行命令**：
   - 在 `top` 中，你可以使用一些快捷键进行不同的操作。例如：
     - `q`: 退出 `top`。
     - `k`: 杀死一个进程。
     - `u`: 显示指定用户的进程。//输入的是用户名
     - `H`: 显示/隐藏线程。
     - `f`: 选择显示的列。 按下 `Space` 键来切换该列的显示状态。显示的列前面的方框会变为星号 `*`，表示该列已经被选择。
   - 按下 `?` 键可以查看更多的快捷键。
2. **退出 `top`**：
   - 要退出 `top`，可以按下 `q` 键。

```shell
top - 16:13:07 up 13 days,  2:11,  1 user,  load average: 0.15, 0.24, 0.17
//    当前时间	状态  已运行时间      当前登录用户数     系统负载，分别表示1分钟、5分钟和15分钟的平均负载。
Tasks: 203 total,   1 running, 201 sleeping,   1 stopped,   0 zombie //任务信息
%Cpu(s):  0.3 us,  0.0 sy,  0.0 ni, 99.7 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
MiB Mem :   1896.2 total,     96.7 free,    660.1 used,   1139.5 buff/cache
MiB Swap:    935.4 total,    229.3 free,    706.1 used.    782.9 avail Mem 
```

## htop

<img src="https://raw.githubusercontent.com/1508103369/image/typora/image-20231215095147560.png" alt="image-20231215095147560" style="zoom:50%;" />

<img src="https://raw.githubusercontent.com/1508103369/image/typora/image-20231215095223091.png" alt="image-20231215095223091" style="zoom:50%;" />

```bash
PID：进程标志号，是非零正整数
USER：进程所有者的用户名
PR：进程的优先级别
NI：进程的优先级别数值
VIRT：进程占用的虚拟内存值
RES：进程占用的物理内存值
SHR：进程使用的共享内存值
S：进程的状态，其中S表示休眠，R表示正在运行，Z表示僵死状态，N表示该进程优先值是负数
%CPU：该进程占用的CPU使用率
%MEM：该进程占用的物理内存和总内存的百分比
TIME+：该进程启动后占用的总的CPU时间
COMMAND：进程启动的启动命令名称
```

```
搜索进程：鼠标点击Search 或者按下F3 或者输入”/”， 输入进程名进行搜索，例如搜索ssh
过滤器：按下F4，进入过滤器，相当于关键字搜索，不区分大小写，例如过滤dev。
显示树形结构：输入”t”或按下F5，显示树形结构
search和filter的区别：search会将光标定位到符合条件的进程上，通过F3键进行逐个查找；而filter会直接将符合条件的进程筛选出来。search和filter都使用ESC键来取消功能。
```



## ps当前进程信息

```bash
显示所有进程
ps -e  or ps aux
每一行代表一个进程。
第一列是进程的PID（进程ID）。
第二列是TTY（终端）信息。
第三列是进程已运行的时间。
ps -u username   //显示特定用户的进程：
ps -e --forest   //显示进程树
ps -eLF          //显示进程线程信息(可以显示进程启动时间，父进程，子进程..)
watch ps aux     //实时刷新进程信息（和top类似）
```

## iftop网络流量监控

```bash
ifconfig     //先查用的是哪个网卡，直接输入iftop默认看的是第一块网卡
$ iftop -i eth0 -nNB -m 10M    一般直接iftop -i eth0
-i 指定网卡，
-n 代表主机通过ip显示不走DNS
-N 只显示连接端口号，不显示端口对应的服务名称(不加会显示如ssh这样的服务名称，不便于排查)
-B 指定显示单位为Kb，默认是bit，太小！
-m 设置输出界面中最上面的流量刻度最大值，流量刻度分5个大段显示
显示每个连接的总流量    ## 进入界面后按下 T显示
指定 ip 172.17.1.158 的流量   ##进入界面后按下 l 后,再输入 172.17.1.158 并回车)
显示端口号			##（添加 -P 参数，进入交互界面可通过按 p 打开或者关闭）
显示流量进度条        ## 进入界面后按下 L 
-B 以bytes为单位显示流量(默认是bits)，如：# iftop -B

按h切换是否显示帮助;
按n切换显示本机的IP或主机名;
按s切换是否显示本机的host信息;
按d切换是否显示远端目标主机的host信息;
按t切换显示格式为2行/1行/只显示发送流量/只显示接收流量;
按N切换显示端口号或端口服务名称;
按S切换是否显示本机的端口信息;
按D切换是否显示远端目标主机的端口信息;
按p切换是否显示端口信息;
按P切换暂停/继续显示;
按b切换是否显示平均流量图形条;
按B切换计算2秒或10秒或40秒内的平均流量;
按T切换是否显示每个连接的总流量;
按l打开屏幕过滤功能，输入要过滤的字符，比如ip,按回车后，屏幕就只显示这个IP相关的流量信息;
按L切换显示画面上边的刻度;刻度不同，流量图形条会有变化;
按j或按k可以向上或向下滚动屏幕显示的连接记录;
按1或2或3可以根据右侧显示的三列流量数据进行排序;
按<根据左边的本机名或IP排序;
按>根据远端目标主机的主机名或IP排序;
按o切换是否固定只显示当前的连接;
按f可以编辑过滤代码，这是翻译过来的说法，我还没用过这个！
按!可以使用shell命令，这个没用过！没搞明白啥命令在这好用呢！
按q退出监控。

TX：发送流量
RX：接收流量
TOTAL：总流量
Cumm：运行iftop到目前时间的总流量
peak：流量峰值
rates：分别表示过去 2s 10s 40s 的平均流量
8Mb=1MB
```

## netstat查看服务及监听端口

```bash

[root@localhost ~]# netstat -ntlp   //查看当前所有tcp端口·
[root@localhost ~]# netstat -ntulp | grep 80   //查看所有80端口使用情况·
[root@localhost ~]# netstat -an | grep 3306   //查看所有3306端口使用情况·
[root@localhost ~]# netstat -nlp |grep LISTEN   //查看当前所有监听端口·
```

